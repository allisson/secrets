# ðŸš€ Secrets v0.5.1 Release Notes

> Release date: 2026-02-19

This patch release fixes master key memory handling to keep loaded key material usable while
preserving secure zeroing behavior for temporary and teardown paths.

## Highlights

- Fixed master key loading from environment variables to avoid zeroing the in-use key slice
- Hardened keychain shutdown by zeroing all master keys before clearing chain state
- Added regression tests for key usability after load and secure zeroing on close

## Fixes

- `LoadMasterKeyChainFromEnv` now stores a copy of decoded key bytes before zeroing temporary buffers
- `MasterKeyChain.Close` now zeros every loaded master key before clearing the key map

## Security Impact

- Reduces risk of leaked key material remaining in temporary decode buffers
- Ensures explicit in-memory zeroing of master keys during keychain teardown

## Runtime and Compatibility

- API baseline remains `v1` (`/v1/*`)
- No endpoint, payload, or status code contract changes
- No schema migrations required specifically for this patch release

## Patch Release Safety

- Most environments require no configuration changes for this release
- Rolling upgrade is recommended; keep standard health and smoke checks in place
- Rollback to the previous stable image is safe when incident criteria are met

## Upgrade Notes

1. Deploy binaries/images with `v0.5.1`
2. Run standard health checks (`GET /health`, `GET /ready`)
3. Validate key-dependent flows (token issuance, secrets write/read, transit encrypt/decrypt)

## Operator Verification Checklist

1. Confirm service health and readiness after rollout
2. Confirm startup succeeds with configured `MASTER_KEYS` and `ACTIVE_MASTER_KEY_ID`
3. Confirm secrets and transit workflows succeed under normal traffic
4. Confirm no unexpected key configuration or decryption errors in logs

## Documentation Updates

- Added [v0.5.1 upgrade guide](v0.5.1-upgrade.md)
- Updated [release compatibility matrix](compatibility-matrix.md) with `v0.5.0 -> v0.5.1`
- Updated current-release references across docs and pinned image examples to `v0.5.1`

## See also

- [v0.5.1 upgrade guide](v0.5.1-upgrade.md)
- [Release compatibility matrix](compatibility-matrix.md)
- [Key management operations](../operations/key-management.md)
- [Security model](../concepts/security-model.md)
