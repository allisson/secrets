# ðŸš€ Secrets v0.4.1 Release Notes

> Release date: 2026-02-19

This bugfix release improves authorization policy path matching behavior and updates
documentation for v0.4.1 release consumption.

## Highlights

- Fixed authorization path matching for policies using mid-path wildcards
- Clarified wildcard matching semantics for exact, trailing wildcard, and segment wildcard paths
- Expanded automated coverage for policy templates, wildcard edge cases, and common policy mistakes

## Bug Fixes

- Policy matcher now supports mid-path wildcard patterns such as `/v1/transit/keys/*/rotate`
- Mid-path `*` wildcard now matches exactly one path segment
- Trailing wildcard `/*` behavior remains greedy for nested subpaths

## Runtime and Compatibility

- API baseline remains v1 (`/v1/*`)
- No breaking API path or payload contract changes
- Local development targets: Linux and macOS
- CI baseline: Go `1.25.5`, PostgreSQL `16-alpine`, MySQL `8.0`
- Compatibility targets: PostgreSQL `12+`, MySQL `8.0+`

## Upgrade Notes

- Recommended for all users relying on wildcard policy path matching
- No schema migrations required specifically for this bugfix release
- Existing tokenization, secrets, transit, auth, and audit flows remain API-compatible

## Policy Migration Note

If existing policies assumed prefix-only behavior, review wildcard paths used for rotate and
similar endpoint-specific actions.

Before (too broad for intent):

```json
[
  {
    "path": "/v1/transit/keys/*",
    "capabilities": ["rotate"]
  }
]
```

After (scoped to rotate endpoint pattern):

```json
[
  {
    "path": "/v1/transit/keys/*/rotate",
    "capabilities": ["rotate"]
  }
]
```

## Verification Checklist

1. Deploy binaries/images with `v0.4.1`
2. Verify baseline health (`GET /health`, `GET /ready`)
3. Re-run policy smoke checks for expected allow/deny behavior
4. Confirm wildcard policies used in production match intended path semantics

## Operator Quick Checklist (v0.4.1)

1. Search client policies for rotate patterns and replace broad forms with `/v1/transit/keys/*/rotate` when needed.
2. Run route-shape smoke checks (`/v1/transit/keys/payment/extra/rotate` and `/v1/secrets`) and expect `404`.
3. Run allow/deny policy smoke checks and expect capability-denied calls to return `403`.
4. Review recent denied audit events and confirm mismatches are expected after policy rollout.

## Documentation Migration Map (v0.4.1)

- Policy matching semantics: [Policies cookbook / Path matching behavior](../api/policies.md#path-matching-behavior)
- Route-vs-policy triage: [Policies cookbook / Route shape vs policy shape](../api/policies.md#route-shape-vs-policy-shape)
- Pre-deploy policy checks: [Policies cookbook / Policy review checklist before deploy](../api/policies.md#policy-review-checklist-before-deploy)
- Capability verification: [Capability matrix](../api/capability-matrix.md)
- Operational validation steps: [Policy smoke tests](../operations/policy-smoke-tests.md)
- Incident triage and matcher FAQ: [Troubleshooting](../getting-started/troubleshooting.md)

## See also

- [Policies cookbook](../api/policies.md)
- [Policy smoke tests](../operations/policy-smoke-tests.md)
- [Troubleshooting](../getting-started/troubleshooting.md)
- [API compatibility policy](../api/versioning-policy.md)
