# ðŸš€ Secrets v0.6.0 Release Notes

> Release date: 2026-02-19

This minor release introduces KMS-backed master key support for encrypting key material at rest,
adds a dedicated master key rotation command, and expands operational documentation for provider setup
and migration workflows.

## Highlights

- Added KMS support for master key loading and decryption at startup
- Added CLI KMS flags to `create-master-key` (`--kms-provider`, `--kms-key-uri`)
- Added new `rotate-master-key` CLI command for staged master key rotation
- Added provider setup and migration runbook: [KMS setup guide](../operations/kms-setup.md)

## Runtime Changes

- New environment variables:
  - `KMS_PROVIDER`
  - `KMS_KEY_URI`
- Master key loading now supports two modes:
  - KMS mode: both variables set
  - Legacy mode: both variables unset
- Startup fails fast if only one KMS variable is set

## Security and Operations Impact

- KMS mode encrypts master keys at rest and centralizes key access control in your KMS provider
- Existing legacy environments remain supported without immediate migration
- Master key rotation now has an explicit CLI workflow for appending a new active key before cleanup

## Upgrade Notes

1. Deploy binaries/images with `v0.6.0`
2. Keep legacy mode or configure KMS mode explicitly (`KMS_PROVIDER` + `KMS_KEY_URI`)
3. Run standard health checks and key-dependent smoke checks
4. If adopting KMS mode, follow the staged migration in [KMS setup guide](../operations/kms-setup.md)

## Operator Verification Checklist

1. Confirm `GET /health` and `GET /ready` succeed
2. Confirm startup logs reflect intended key mode and active master key
3. Confirm token issuance and secrets/transit round-trip flows
4. Confirm no KMS auth/decrypt errors in startup logs

## Documentation Updates

- Added [v0.6.0 upgrade guide](v0.6.0-upgrade.md)
- Added [KMS setup guide](../operations/kms-setup.md)
- Updated [CLI commands](../cli/commands.md) with KMS flags and `rotate-master-key`
- Updated [Environment variables](../configuration/environment-variables.md) with KMS mode configuration

## See also

- [v0.6.0 upgrade guide](v0.6.0-upgrade.md)
- [Release compatibility matrix](compatibility-matrix.md)
- [KMS setup guide](../operations/kms-setup.md)
- [Key management operations](../operations/key-management.md)
