# v0.11.0 Release Notes

> Release date: 2026-02-23

## Account Lockout (PCI DSS 8.3.4)

v0.11.0 adds persistent account lockout to the `clients` table, satisfying PCI DSS Requirement 8.3.4: lock accounts after ≤10 failed authentication attempts for a minimum of 30 minutes.

### Added

- Account lockout on `POST /v1/token`: clients are locked after `LOCKOUT_MAX_ATTEMPTS` (default `10`) consecutive failed authentication attempts
- Locked clients receive `423 Locked` with error code `client_locked`
- Lock duration configurable via `LOCKOUT_DURATION_MINUTES` (default `30`)
- Successful authentication resets the failed attempts counter and clears the lock
- Expired locks (past `locked_until`) are treated as unlocked automatically
- Database migration `000004_add_account_lockout`: adds `failed_attempts` and `locked_until` columns to `clients`

### Runtime Changes

New environment variables (all optional, defaults satisfy PCI DSS 8.3.4):

| Variable | Default | Description |
| --- | --- | --- |
| `LOCKOUT_MAX_ATTEMPTS` | `10` | Failed attempts before lockout |
| `LOCKOUT_DURATION_MINUTES` | `30` | Lock duration in minutes |

`POST /v1/token` response codes:

| Condition | Code |
| --- | --- |
| Valid credentials | `200 OK` |
| Invalid credentials, attempts < threshold | `401 Unauthorized` |
| Invalid credentials, threshold reached | `401 Unauthorized` (lock written) |
| Client locked (within window) | `423 Locked` |
| Client inactive | `403 Forbidden` |

### Security

- Satisfies PCI DSS 8.3.4 out of the box with default configuration
- Complements existing per-IP rate limiting (`RATE_LIMIT_TOKEN_*`) — lockout operates on client identity, not IP address
- Lockout state persists across server restarts (stored in the database)
- Best-effort lock writes: if the database update fails, the response is still `401` (never silently skips the credential check)

### Upgrade Guide

See [v0.11.0 upgrade guide](v0.11.0-upgrade.md) for step-by-step migration instructions.

## See Also

- [Authentication API](../api/auth/authentication.md)
- [Configuration reference](../configuration.md)
- [Compatibility matrix](compatibility-matrix.md)
- [Upgrade guide](v0.11.0-upgrade.md)
