# ðŸš€ Secrets v0.7.0 Release Notes

> Release date: 2026-02-20

This minor release adds dedicated IP-based rate limiting for unauthenticated token issuance,
expands configuration controls for token endpoint throttling, and updates operator guidance for
credential-stuffing and brute-force protection.

## Highlights

- Added IP-based rate limiting for `POST /v1/token`
- Added token endpoint rate-limit configuration via `RATE_LIMIT_TOKEN_*` variables
- Added token endpoint `429 Too Many Requests` behavior with `Retry-After`
- Expanded docs and runbooks for token endpoint abuse protection and rollout validation

## Runtime Changes

- New environment variables:
  - `RATE_LIMIT_TOKEN_ENABLED` (default `true`)
  - `RATE_LIMIT_TOKEN_REQUESTS_PER_SEC` (default `5.0`)
  - `RATE_LIMIT_TOKEN_BURST` (default `10`)
- `POST /v1/token` may now return `429 Too Many Requests` when per-IP token limits are exceeded
- Authenticated per-client rate limiting (`RATE_LIMIT_*`) remains unchanged

## Security and Operations Impact

- Improves protection against token endpoint credential stuffing and brute-force traffic
- Applies stricter defaults on unauthenticated token issuance than authenticated API routes
- Requires review of proxy/trusted-IP setup when using forwarded headers in production

## Upgrade Notes

1. Deploy binaries/images with `v0.7.0`
2. Review and tune `RATE_LIMIT_TOKEN_*` to match expected login/token traffic
3. Validate token issuance flow under normal and burst traffic
4. Confirm `429` + `Retry-After` behavior for token endpoint in controlled load tests

## Operator Verification Checklist

1. Confirm `GET /health` and `GET /ready` succeed
2. Confirm `POST /v1/token` issues tokens normally for expected request rates
3. Confirm token endpoint returns controlled `429` with `Retry-After` when intentionally exceeded
4. Confirm authenticated route limits and retry behavior still match policy

## Documentation Updates

- Added [v0.7.0 upgrade guide](v0.7.0-upgrade.md)
- Updated [API rate limiting](../api/rate-limiting.md) with token endpoint scope
- Updated [Environment variables](../configuration/environment-variables.md) with `RATE_LIMIT_TOKEN_*`
- Updated [Troubleshooting](../getting-started/troubleshooting.md) with token endpoint `429` diagnostics

## See also

- [v0.7.0 upgrade guide](v0.7.0-upgrade.md)
- [Release compatibility matrix](compatibility-matrix.md)
- [API rate limiting](../api/rate-limiting.md)
- [Production rollout golden path](../operations/production-rollout.md)
